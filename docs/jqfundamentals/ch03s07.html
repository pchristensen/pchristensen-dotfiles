<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:xslthl="http://xslthl.sf.net"><head xmlns="http://www.w3.org/1999/xhtml"><title>Manipulating Elements</title><link href="blueprint.css" rel="stylesheet" type="text/css" /><link href="style.css" rel="stylesheet" type="text/css" /><meta content="DocBook XSL Stylesheets V1.75.2" name="generator" /><link rel="home" href="index.html" title="jQuery Fundamentals" /><link rel="up" href="ch03.html" title="Chapter 3. jQuery Basics" /><link rel="prev" href="ch03s06.html" title="Traversing" /><link rel="next" href="ch03s08.html" title="Exercises" /></head><body><div class="container"><div class="span-18 push-3"><div xmlns="http://www.w3.org/1999/xhtml" class="navheader"><table summary="Navigation header" width="100%"><tr><th align="center" colspan="3">Manipulating Elements</th></tr><tr><td align="left"><a accesskey="p" href="ch03s06.html">Prev</a> </td><th align="center" width="60%">Chapter 3. jQuery Basics</th><td align="right"> <a accesskey="n" href="ch03s08.html">Next</a></td></tr></table><hr /></div><div xmlns="http://www.w3.org/1999/xhtml" class="section" title="Manipulating Elements"><div class="titlepage"><div><div><h2 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N209F9" />Manipulating Elements</h2></div></div></div>
    

    <p>Once you've made a selection, the fun begins. You can change, move,
    remove, and clone elements. You can also create new elements via a simple
    syntax.</p>

    <p>For complete documentation of jQuery manipulation methods, visit
    <a class="ulink" href="http://api.jquery.com/category/manipulation/">http://api.jquery.com/category/manipulation/</a>.</p>

    <div class="section" title="Getting and Setting Information about Elements"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20A08" />Getting and Setting Information about Elements</h3></div></div></div>
      

      <p>There are any number of ways you can change an existing element.
      Among the most common tasks you'll perform is changing the inner HTML or
      attribute of an element. jQuery offers simple, cross-browser methods for
      these sorts of manipulations. You can also get information about
      elements using many of the same methods in their getter incarnations.
      We'll see examples of these throughout this section, but specifically,
      here are a few methods you can use to get and set information about
      elements.</p>

      <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        <p>Changing things about elements is trivial, but remember that the
        change will affect <span class="emphasis"><em>all</em></span> elements in the selection,
        so if you just want to change one element, be sure to specify that in
        your selection before calling a setter method.</p>
      </div>

      <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        <p>When methods act as getters, they generally only work on the
        first element in the selection, and they do not return a jQuery
        object, so you can't chain additional methods to them. One notable
        exception is <code class="code">$.fn.text</code>; as mentioned below, it gets the
        text for all elements in the selection.</p>
      </div>

      <div class="variablelist"><dl><dt><span class="term">$.fn.html</span></dt><dd>
            <p>Get or set the html contents.</p>
          </dd><dt><span class="term">$.fn.text</span></dt><dd>
            <p>Get or set the text contents; HTML will be stripped.</p>
          </dd><dt><span class="term">$.fn.attr</span></dt><dd>
            <p>Get or set the value of the provided attribute.</p>
          </dd><dt><span class="term">$.fn.width</span></dt><dd>
            <p>Get or set the width in pixels of the first element in the
            selection as an integer.</p>
          </dd><dt><span class="term">$.fn.height</span></dt><dd>
            <p>Get or set the height in pixels of the first element in the
            selection as an integer.</p>
          </dd><dt><span class="term">$.fn.position</span></dt><dd>
            <p>Get an object with position information for the first
            element in the selection, relative to its first positioned
            ancestor. <span class="emphasis"><em>This is a getter only.</em></span></p>
          </dd><dt><span class="term">$.fn.val</span></dt><dd>
            <p>Get or set the value of form elements.</p>
          </dd></dl></div>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20A7B" /><p class="title"><b>Example 3.26. Changing the HTML of an element</b></p><div class="example-contents">
        

        <pre class="programlisting">$('#myDiv p:first')
    .html('New &lt;strong&gt;first&lt;/strong&gt; paragraph!');</pre>
      </div></div><br class="example-break" />
    </div>

    <div class="section" title="Moving, Copying, and Removing Elements"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20A85" />Moving, Copying, and Removing Elements</h3></div></div></div>
      

      <p>There are a variety of ways to move elements around the DOM;
      generally, there are two approaches:</p>

      <div class="itemizedlist"><ul class="itemizedlist"><li class="listitem">
          <p>Place the selected element(s) relative to another
          element</p>
        </li><li class="listitem">
          <p>Place an element relative to the selected element(s)</p>
        </li></ul></div>

      <p>For example, jQuery provides <code class="code">$.fn.insertAfter</code> and
      <code class="code">$.fn.after</code>. The <code class="code">$.fn.insertAfter</code> method places
      the selected element(s) after the element that you provide as an
      argument; the <code class="code">$.fn.after</code> method places the element provided
      as an argument after the selected element. Several other methods follow
      this pattern: <code class="code">$.fn.insertBefore</code> and
      <code class="code">$.fn.before</code>; <code class="code">$.fn.appendTo</code> and
      <code class="code">$.fn.append</code>; and <code class="code">$.fn.prependTo</code> and
      <code class="code">$.fn.prepend</code>.</p>

      <p>The method that makes the most sense for you will depend on what
      elements you already have selected, and whether you will need to store a
      reference to the elements you're adding to the page. If you need to
      store a reference, you will always want to take the first approach --
      placing the selected elements relative to another element -- as it
      returns the element(s) you're placing. In this case,
      <code class="code">$.fn.insertAfter</code>, <code class="code">$.fn.insertBefore</code>,
      <code class="code">$.fn.appendTo</code>, and <code class="code">$.fn.prependTo</code> will be your
      tools of choice.</p>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20ACC" /><p class="title"><b>Example 3.27. Moving elements using different approaches</b></p><div class="example-contents">
        

        <pre class="programlisting">// make the first list item the last list item
var $li = $('#myList li:first').appendTo('#myList');

// another approach to the same problem
$('#myList').append($('#myList li:first'));

// note that there's no way to access the
// list item that we moved, as this returns
// the list itself
</pre>
      </div></div><br class="example-break" />

      <div class="section" title="Cloning Elements"><div class="titlepage"><div><div><h4 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20AD5" />Cloning Elements</h4></div></div></div>
        

        <p>When you use methods such as $.fn.appendTo, you are moving the
        element; sometimes you want to make a copy of the element instead. In
        this case, you'll need to use $.fn.clone first.</p>

        <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20ADD" /><p class="title"><b>Example 3.28. Making a copy of an element</b></p><div class="example-contents">
          

          <pre class="programlisting">// copy the first list item to the end of the list
$('#myList li:first').clone().appendTo('#myList');</pre>
        </div></div><br class="example-break" />

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
          <p>If you need to copy related data and events, be sure to pass
          <code class="code">true</code> as an argument to <code class="code">$.fn.clone</code>.</p>
        </div>
      </div>

      <div class="section" title="Removing Elements"><div class="titlepage"><div><div><h4 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20AF3" />Removing Elements</h4></div></div></div>
        

        <p>There are two ways to remove elements from the page:
        <code class="code">$.fn.remove</code> and <code class="code">$.fn.detach</code>. You'll use
        <code class="code">$.fn.remove</code> when you want to permanently remove the
        selection from the page; while the method does return the removed
        element(s), those elements will not have their associated data and
        events attached to them if you return them to the page.</p>

        <p>If you need the data and events to persist, you'll want to use
        <code class="code">$.fn.detach</code> instead. Like <code class="code">$.fn.remove</code>, it
        returns the selection, but it also maintains the data and events
        associated with the selection, so you can restore the selection to the
        page at a later time.</p>

        <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
          <p>The <code class="code">$.fn.detach</code> method is extremely valuable if
          you are doing heavy manipulation to an element. In that case, it's
          beneficial to <code class="code">$.fn.detach</code> the element from the page,
          work on it in your code, and then restore it to the page when you're
          done. This saves you from expensive "DOM touches" while maintaining
          the element's data and events.</p>
        </div>

        <p>If you want to leave the element on the page but simply want to
        remove its contents, you can use <code class="code">$.fn.empty</code> to dispose of
        the element's inner HTML.</p>
      </div>
    </div>

    <div class="section" title="Creating New Elements"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20B21" />Creating New Elements</h3></div></div></div>
      

      <p>jQuery offers a trivial and elegant way to create new elements
      using the same <code class="code">$()</code> method you use to make
      selections.</p>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B2C" /><p class="title"><b>Example 3.29. Creating new elements</b></p><div class="example-contents">
        

        <pre class="programlisting">$('&lt;p&gt;This is a new paragraph&lt;/p&gt;');
$('&lt;li class="new"&gt;new list item&lt;/li&gt;');</pre>
      </div></div><br class="example-break" />

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B35" /><p class="title"><b>Example 3.30. Creating a new element with an attribute object</b></p><div class="example-contents">
        

        <pre class="programlisting">$('&lt;a/&gt;', { 
    html : 'This is a &lt;strong&gt;new&lt;/strong&gt; link',
    'class' : 'new',
    href : 'foo.html'
});</pre>
      </div></div><br class="example-break" />

      <p class="remark"><i><span class="remark">Note that in the attributes object we included as the second
      argument, the property name class is quoted, while the property names
      text and href are not. Property names generally do not need to be quoted
      unless they are reserved words (as class is in this case).</span></i></p>

      <p>When you create a new element, it is not immediately added to the
      page. There are several ways to add an element to the page once it's
      been created.</p>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B44" /><p class="title"><b>Example 3.31. Getting a new element on to the page</b></p><div class="example-contents">
        

        <pre class="programlisting">var $myNewElement = $('&lt;p&gt;New element&lt;/p&gt;');
$myNewElement.appendTo('#content');

$myNewElement.insertAfter('ul:last'); // this will remove the p from #content!
$('ul').last().after($myNewElement.clone());  // clone the p so now we have 2</pre>
      </div></div><br class="example-break" />

      <p class="remark"><i><span class="remark">Strictly speaking, you don't have to store the created element
      in a variable -- you could just call the method to add the element to
      the page directly after the $(). However, most of the time you will want
      a reference to the element you added, so you don't need to select it
      later.</span></i></p>

      <p>You can even create an element as you're adding it to the page,
      but note that in this case you don't get a reference to the newly
      created element.</p>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B53" /><p class="title"><b>Example 3.32. Creating and adding an element to the page at the same
        time</b></p><div class="example-contents">
        

        <pre class="programlisting">$('ul').append('&lt;li&gt;list item&lt;/li&gt;');</pre>
      </div></div><br class="example-break" />

      <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
        <p>The syntax for adding new elements to the page is so easy, it's
        tempting to forget that there's a huge performance cost for adding to
        the DOM repeatedly. If you are adding many elements to the same
        container, you'll want to concatenate all the html into a single
        string, and then append that string to the container instead of
        appending the elements one at a time. You can use an array to gather
        all the pieces together, then <code class="code">join</code> them into a single
        string for appending.</p>

        <pre class="programlisting">var myItems = [], $myList = $('#myList');

for (var i=0; i&lt;100; i++) {
    myItems.push('&lt;li&gt;item ' + i + '&lt;/li&gt;');
}

$myList.append(myItems.join(''));</pre>
      </div>
    </div>

    <div class="section" title="Manipulating Attributes"><div class="titlepage"><div><div><h3 class="title"><a xmlns:saxon="http://icl.com/saxon" id="N20B69" />Manipulating Attributes</h3></div></div></div>
      

      <p>jQuery's attribute manipulation capabilities are extensive. Basic
      changes are simple, but the $.fn.attr method also allows for more
      complex manipulations.</p>

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B71" /><p class="title"><b>Example 3.33. Manipulating a single attribute</b></p><div class="example-contents">
        

        <pre class="programlisting">$('#myDiv a:first').attr('href', 'newDestination.html');</pre>
      </div></div><br class="example-break" />

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B7A" /><p class="title"><b>Example 3.34. Manipulating multiple attributes</b></p><div class="example-contents">
        

        <pre class="programlisting">$('#myDiv a:first').attr({
    href : 'newDestination.html',
    rel : 'super-special'
});</pre>
      </div></div><br class="example-break" />

      <div class="example"><a xmlns:saxon="http://icl.com/saxon" id="N20B83" /><p class="title"><b>Example 3.35. Using a function to determine an attribute's new value</b></p><div class="example-contents">
        

        <pre class="programlisting">$('#myDiv a:first').attr({
    rel : 'super-special',
    href : function() { 
        return '/new/' + $(this).attr('href');
    }
});

$('#myDiv a:first').attr('href', function() {
    return '/new/' + $(this).attr('href');
});</pre>
      </div></div><br class="example-break" />
    </div>
  </div><hr /><p class="copyright">Copyright <a href="http://www.rebeccamurphey.com">
    Rebecca Murphey</a>, released under the 
  <a href="http://creativecommons.org/licenses/by-sa/3.0/us/">
	Creative Commons Attribution-Share Alike 3.0 United States license</a>.
  </p><script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-143877-9']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><div xmlns="http://www.w3.org/1999/xhtml" class="navfooter"><hr /><table summary="Navigation footer" width="100%"><tr><td align="left"><a accesskey="p" href="ch03s06.html">Prev</a> </td><td align="center"><a accesskey="u" href="ch03.html">Up</a></td><td align="right"> <a accesskey="n" href="ch03s08.html">Next</a></td></tr><tr><td valign="top" align="left">Traversing </td><td align="center"><a accesskey="h" href="index.html">Home</a></td><td valign="top" align="right"> Exercises</td></tr></table></div></div></div></body></html>